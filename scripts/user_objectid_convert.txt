
db.userdetails.find().snapshot().forEach(
    function (doc) {
        db.users.save(doc);
    }
);


db.emaildatas.find({}, {user_id:1}).snapshot().forEach(
    function (doc) {
        db.emaildatas.update(
            {
                _id: doc._id
            },
            {
                $set: {
                    user_id: db.users.findOne({_id: ObjectId(doc.user_id)}, {})._id
                }
            }
        );
    }
);

db.authtokens.find({}, {user_id:1}).snapshot().forEach(
    function (doc) {
        print
        db.authtokens.update(
            {
                _id: doc._id
            },
            {
                $set: {
                    user_id: db.users.findOne({_id: ObjectId(doc.user_id)}, {})._id
                }
            }
        );
    }
);


db.fcmtokens.find({}, {user_id:1}).snapshot().forEach(
    function (doc) {

        db.fcmtokens.update(
            {
                _id: doc._id
            },
            {
                $set: {
                    user_id: db.users.findOne({_id: ObjectId(doc.user_id)}, {})._id
                }
            }
        );
    }
);

db.tokens.find().snapshot().forEach(
    function (doc) {
        db.tokens.update(
            {
                _id: doc._id
            },
            {
                $set: {
                    user_id: db.users.findOne({_id: ObjectId(doc.user_id)}, {})._id
                }
            }
        );
    }
);